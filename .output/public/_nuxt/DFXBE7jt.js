import{r as o,l as z,m as R,n as A,p as H,c as n,a as e,q as L,s as w,v as T,x as $,F as C,j as M,d as J,y as B,t as i,o as r,g as q,z as O}from"./C-yttdV0.js";function W(){const P=o(!1),{$googleMaps:u}=z(),p=async()=>{try{if(!u)return console.error("Google Maps plugin not available"),null;const l=await u();return P.value=!0,l}catch(l){return console.error("Failed to load Google Maps API:",l),null}},b=async l=>{try{const c=await p();return!c||!c.places?(console.error("Google Maps Places API not available"),null):new c.places.Autocomplete(l,{types:["establishment","geocode"],componentRestrictions:{country:"gb"},fields:["place_id","formatted_address","name","geometry"]})}catch(c){return console.error("Failed to setup Places Autocomplete:",c),null}},f=(l,c)=>{l&&l.addListener("place_changed",()=>{const _=l.getPlace();c(_)})};return{isLoaded:R(P),loadGoogleMapsApi:p,setupPlacesAutocomplete:b,attachPlaceChangedListener:f}}const K={class:"min-h-screen bg-gray-50"},Q={class:"py-8 bg-amber-50"},X={class:"container mx-auto px-4"},Y={class:"bg-white p-6 rounded-lg shadow-md max-w-4xl mx-auto mb-8"},Z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},ee={class:"md:col-span-1 lg:col-span-2"},se={class:"md:col-span-1 lg:col-span-2"},te={class:"md:col-span-1 lg:col-span-1"},ae=["value"],oe={class:"md:col-span-1 lg:col-span-1"},le=["value"],ie={class:"md:col-span-1 lg:col-span-2"},ne={class:"md:col-span-2 lg:col-span-2 flex items-end"},re=["disabled"],de={key:0},ce={key:1},ue={key:0,class:"py-8"},pe={class:"container mx-auto px-4"},me={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ge={class:"lg:col-span-2"},ve={key:0,class:"space-y-4"},be={key:1,class:"bg-white rounded-lg p-6 shadow-md text-center"},fe={key:2,class:"space-y-4"},ye=["onClick"],xe={class:"flex items-center space-x-4"},he={class:"flex-shrink-0"},we=["src","alt"],_e={class:"flex-1"},ke={class:"text-lg font-semibold"},Ce={class:"text-sm text-gray-600 mt-1"},Me={class:"mr-3"},Pe={class:"text-xs text-gray-500 mt-1"},Se={class:"text-right"},Le={class:"text-lg font-bold"},Te=["onClick"],Ve={class:"lg:col-span-1"},De={class:"bg-white rounded-lg shadow-md overflow-hidden mb-6"},je={key:0,class:"bg-white rounded-lg shadow-md overflow-hidden mb-6"},Ae={class:"p-4"},$e={class:"flex justify-between py-2 border-b"},Be={class:"font-medium"},Fe={class:"flex justify-between py-2 border-b"},Ue={class:"font-medium"},Ee={class:"flex justify-between py-2"},Ge={class:"font-medium"},Ie={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},Ne={class:"p-4"},ze={class:"flex justify-between py-2 border-b"},Re={class:"font-medium"},He={class:"flex justify-between py-2 border-b"},Je={class:"font-medium"},qe={class:"flex justify-between py-2 border-b"},Oe={class:"font-medium"},We={class:"flex justify-between py-2 border-b"},Ke={class:"font-medium"},Qe={class:"flex justify-between py-2 border-b"},Xe={class:"font-medium"},Ye={class:"flex justify-between py-2 border-b font-bold"},Ze={class:"mt-4"},ss={__name:"quote",setup(P){const u=o(""),p=o(""),b=o(2),f=o(1),l=o(new Date().toISOString().slice(0,16));W();const c=o(null),_=o(null);o(null),o(null),o(null),o(null);const y=o(null);o(null),o(null),o(null);const V=o(!1),x=o(!1),D=o(!1),S=o([]),g=o(null),v=o(null),F=A(()=>l.value?new Date(l.value).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):""),U=A(()=>l.value?new Date(l.value).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"");H(async()=>{try{setTimeout(()=>{if(V.value=!0,y.value){const a=document.createElement("div");a.className="bg-gray-200 w-full h-full flex items-center justify-center",a.innerHTML=`
          <div class="text-center p-4">
            <div class="text-amber-500 text-5xl mb-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-12 h-12 mx-auto">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
              </svg>
            </div>
            <p class="text-gray-600">Journey Map View</p>
            <p class="text-gray-500 text-sm">Real map will appear here after searching</p>
          </div>
        `,y.value.innerHTML="",y.value.appendChild(a)}},500)}catch(a){console.error("Failed to initialize mock map:",a)}});const E=async()=>{await new Promise(m=>setTimeout(m,1e3));const a=Math.floor(5+Math.random()*20),s=Math.floor(15+Math.random()*45),t=new Date(l.value),h=new Date(t.getTime()+s*60*1e3);if(v.value={distance:`${a} miles`,duration:`${s} mins`,eta:h.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})},y.value){const m=`
      <div class="bg-gray-100 w-full h-full p-2">
        <div class="bg-white w-full h-full rounded shadow-inner p-3 flex flex-col justify-between">
          <div class="text-xs text-gray-500 mb-2">From: ${u.value}</div>
          <div class="flex-1 relative">
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="w-3/4 h-1 bg-amber-400 relative">
                <div class="absolute -top-2 -left-2 w-4 h-4 bg-amber-500 rounded-full"></div>
                <div class="absolute -top-2 -right-2 w-4 h-4 bg-amber-500 rounded-full"></div>
              </div>
            </div>
          </div>
          <div class="text-xs text-gray-500 mt-2">To: ${p.value}</div>
          <div class="text-center text-sm font-medium mt-3 text-amber-600">
            ${a} miles (${s} mins)
          </div>
        </div>
      </div>
    `;y.value.innerHTML=m}return!0},G=async()=>{if(!u.value||!p.value){alert("Please enter both pickup and drop-off locations");return}x.value=!0,D.value=!0,g.value=null;try{await new Promise(a=>setTimeout(a,2e3)),await E(),I()}catch(a){console.error("Error in mock search:",a)}finally{x.value=!1}},I=()=>{var m;const a={Saloon:"/assets/images/saloon.png",Estate:"/assets/images/saloon.png",MPV:"/assets/images/saloon.png","7 Seater":"/assets/images/saloon.png","9 Seater":"/assets/images/saloon.png"},s=[{id:1,name:"Saloon",passengerCapacity:4,luggageCapacity:2,basePrice:25,pricePerMile:2.5,description:"Comfortable sedan ideal for up to 4 passengers with moderate luggage.",imageUrl:a.Saloon},{id:2,name:"Estate",passengerCapacity:4,luggageCapacity:4,basePrice:30,pricePerMile:2.8,description:"Spacious estate with extra luggage space, perfect for airport transfers.",imageUrl:a.Estate},{id:3,name:"MPV",passengerCapacity:6,luggageCapacity:4,basePrice:40,pricePerMile:3.2,description:"Multi-purpose vehicle ideal for families or small groups with luggage.",imageUrl:a.MPV},{id:4,name:"7 Seater",passengerCapacity:7,luggageCapacity:5,basePrice:50,pricePerMile:3.5,description:"Spacious van with seating for up to 7 passengers plus luggage.",imageUrl:a["7 Seater"]},{id:5,name:"9 Seater",passengerCapacity:9,luggageCapacity:6,basePrice:70,pricePerMile:4,description:"Large minibus perfect for bigger groups and tours.",imageUrl:a["9 Seater"]}];let t=10;if((m=v.value)!=null&&m.distance){const d=v.value.distance,k=parseFloat(d.replace(/[^0-9.]/g,""));t=d.includes("km")?k*.621371:k}const h=s.filter(d=>d.passengerCapacity>=b.value&&d.luggageCapacity>=f.value).map(d=>({...d,price:d.basePrice+d.pricePerMile*t})).sort((d,k)=>d.price-k.price);S.value=h},N=a=>{g.value=a},j=a=>{alert(`Booking ${a.name} for your journey from ${u.value} to ${p.value}.`)};return(a,s)=>(r(),n("div",K,[e("section",Q,[e("div",X,[s[12]||(s[12]=e("h1",{class:"text-3xl font-bold mb-4 text-center"},"Find Available Cabs",-1)),s[13]||(s[13]=e("p",{class:"max-w-3xl mx-auto text-gray-700 mb-8 text-center"}," Enter your journey details below to find the best available cabs for your trip. ",-1)),e("div",Y,[e("div",Z,[e("div",ee,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From Location",-1)),w(e("input",{ref_key:"pickupInput",ref:c,type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),placeholder:"Eg: Gatwick Airport",class:"w-full p-2 border rounded-md text-sm"},null,512),[[T,u.value]])]),e("div",se,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"To Location",-1)),w(e("input",{ref_key:"dropoffInput",ref:_,type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),placeholder:"Eg: SW1 7NL",class:"w-full p-2 border rounded-md text-sm"},null,512),[[T,p.value]])]),e("div",te,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Passengers",-1)),w(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>b.value=t),class:"w-full p-2 border rounded-md text-sm"},[(r(),n(C,null,M(9,t=>e("option",{key:t,value:t},i(t),9,ae)),64))],512),[[$,b.value]])]),e("div",oe,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Luggage",-1)),w(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>f.value=t),class:"w-full p-2 border rounded-md text-sm"},[(r(),n(C,null,M(6,t=>e("option",{key:t,value:t},i(t),9,le)),64))],512),[[$,f.value]])]),e("div",ie,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Pickup Date & Time",-1)),w(e("input",{type:"datetime-local","onUpdate:modelValue":s[4]||(s[4]=t=>l.value=t),class:"w-full p-2 border rounded-md text-sm"},null,512),[[T,l.value]])]),e("div",ne,[e("button",{onClick:G,class:"w-full bg-amber-400 hover:bg-amber-500 text-white py-2 px-4 rounded-md font-medium transition duration-300",disabled:x.value},[x.value?(r(),n("span",de,s[11]||(s[11]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),J(" Searching... ")]))):(r(),n("span",ce,"Search Available Cabs"))],8,re)])])])])]),D.value?(r(),n("section",ue,[e("div",pe,[e("div",me,[e("div",ge,[s[16]||(s[16]=e("h2",{class:"text-2xl font-bold mb-4"},"Available Cabs",-1)),x.value?(r(),n("div",ve,[(r(),n(C,null,M(3,t=>e("div",{key:t,class:"bg-white rounded-lg p-4 shadow-md animate-pulse"},s[14]||(s[14]=[q('<div class="flex items-center space-x-4"><div class="h-16 w-24 bg-gray-300 rounded"></div><div class="flex-1"><div class="h-5 bg-gray-300 rounded w-3/4 mb-2"></div><div class="h-4 bg-gray-300 rounded w-1/2 mb-2"></div><div class="h-4 bg-gray-300 rounded w-1/4"></div></div><div class="h-8 bg-gray-300 rounded w-24"></div></div>',1)]))),64))])):S.value.length?(r(),n("div",fe,[(r(!0),n(C,null,M(S.value,t=>{var h;return r(),n("div",{key:t.id,class:B(["bg-white rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer",{"border-2 border-amber-400":((h=g.value)==null?void 0:h.id)===t.id}]),onClick:m=>N(t)},[e("div",xe,[e("div",he,[e("img",{src:t.imageUrl,alt:t.name,class:"h-16 w-auto object-contain"},null,8,we)]),e("div",_e,[e("h3",ke,i(t.name),1),e("div",Ce,[e("span",Me,i(t.passengerCapacity)+" passengers",1),e("span",null,i(t.luggageCapacity)+" luggage",1)]),e("div",Pe,i(t.description),1)]),e("div",Se,[e("div",Le,"£"+i(t.price.toFixed(2)),1),e("button",{class:"mt-2 bg-amber-400 hover:bg-amber-500 text-white py-1 px-3 rounded-md text-sm transition duration-300",onClick:O(m=>j(t),["stop"])}," Book Now ",8,Te)])])],10,ye)}),128))])):(r(),n("div",be,s[15]||(s[15]=[e("p",{class:"text-lg text-gray-700"},"No cabs available for your search criteria.",-1),e("p",{class:"text-sm text-gray-500 mt-2"},"Try adjusting your passenger count, luggage, or locations.",-1)])))]),e("div",Ve,[e("div",De,[s[17]||(s[17]=e("h3",{class:"bg-gray-100 py-2 px-4 font-semibold"},"Journey Map",-1)),e("div",{ref_key:"mapContainer",ref:y,class:B(["h-64 w-full",{"bg-gray-200 animate-pulse":x.value&&!V.value}])},null,2)]),v.value?(r(),n("div",je,[s[21]||(s[21]=e("h3",{class:"bg-gray-100 py-2 px-4 font-semibold"},"Journey Details",-1)),e("div",Ae,[e("div",$e,[s[18]||(s[18]=e("span",{class:"text-gray-600"},"Distance:",-1)),e("span",Be,i(v.value.distance),1)]),e("div",Fe,[s[19]||(s[19]=e("span",{class:"text-gray-600"},"Duration:",-1)),e("span",Ue,i(v.value.duration),1)]),e("div",Ee,[s[20]||(s[20]=e("span",{class:"text-gray-600"},"Estimated Arrival:",-1)),e("span",Ge,i(v.value.eta),1)])])])):L("",!0),g.value?(r(),n("div",Ie,[s[28]||(s[28]=e("h3",{class:"bg-gray-100 py-2 px-4 font-semibold"},"Trip Summary",-1)),e("div",Ne,[e("div",ze,[s[22]||(s[22]=e("span",{class:"text-gray-600"},"Selected Vehicle:",-1)),e("span",Re,i(g.value.name),1)]),e("div",He,[s[23]||(s[23]=e("span",{class:"text-gray-600"},"Pickup Date:",-1)),e("span",Je,i(F.value),1)]),e("div",qe,[s[24]||(s[24]=e("span",{class:"text-gray-600"},"Pickup Time:",-1)),e("span",Oe,i(U.value),1)]),e("div",We,[s[25]||(s[25]=e("span",{class:"text-gray-600"},"Passengers:",-1)),e("span",Ke,i(b.value),1)]),e("div",Qe,[s[26]||(s[26]=e("span",{class:"text-gray-600"},"Luggage:",-1)),e("span",Xe,i(f.value),1)]),e("div",Ye,[s[27]||(s[27]=e("span",{class:"text-gray-800"},"Total Price:",-1)),e("span",null,"£"+i(g.value.price.toFixed(2)),1)]),e("div",Ze,[e("button",{onClick:s[5]||(s[5]=t=>j(g.value)),class:"w-full bg-amber-400 hover:bg-amber-500 text-white py-2 px-4 rounded-md font-medium transition duration-300"}," Confirm Booking ")])])])):L("",!0)])])])])):L("",!0)]))}};export{ss as default};
